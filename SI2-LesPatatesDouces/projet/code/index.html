<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet" />
    <title>Site réservation de vols en ligne</title>
</head>

<body>
    <div id="app">
        <v-app>
            <v-data-table :headers="headersAeroports" :items="aeroports"></v-data-table>
            <v-data-table :headers="headersVols" :items="vols"></v-data-table>
        </v-app>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script>
        new Vue({
            el: '#app',
            vuetify: new Vuetify(),
            data: {
                aeroports: [],
                vols: [],
                headersAeroports: [
                    {text: 'Ville', value: 'ville'},
                    {text: 'Code', value: 'code'}
                ],
                headersVols: [
                    {text: 'Ville de Départ', value: 'depart.ville'},
                    {text: 'Ville d\'Arrivée', value: 'arrivee.ville'},
                    {text: 'Date de Départ', value: 'date_depart'},
                    {text: 'Date d\'Arrivée', value: 'date_arrivee'},
                    {text: 'Nombre de places disponibles', value: 'nombre_billets'}
                ]
            },
            mounted: function(){
                fetch("http://localhost:5000/aeroport/all")
                .then(function(response){
                    return response.json()
                }).then((json) =>
                    this.aeroports = json //Pourquoi ça marche, on ne sait pas. function ne fonctionne pas
                )
                fetch("http://localhost:5000/vol/all")
                .then(function(response){
                    return response.json()
                }).then((json) =>
                    this.vols = json //Pourquoi ça marche, on ne sait pas. function ne fonctionne pas
                )
            }
        })



    </script>
</body>

</html>